<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Quizzes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial;
  text-align: center;
  margin-top: 30px;
  background: #0b0b12;
  color: white;
}

#quizzes-list {
  margin-top: 20px;
  display: inline-block;
  text-align: left;
  min-width: 320px;
}

li {
  list-style: none;
  margin-bottom: 8px;
  padding: 10px;
  border-radius: 12px;
  cursor: pointer;
  border: 2px solid #00f7ff;
  color: #00f7ff;
  background: #05050a;
  box-shadow: 0 0 8px #00f7ff;
  transition: 0.2s ease;
}

li:hover {
  transform: scale(1.03);
}

li.selected {
  background: #00f7ff;
  color: #05050a;
}

button {
  padding: 12px 26px;
  margin: 12px 6px;
  font-size: 16px;
  cursor: pointer;
  border-radius: 14px;
  background: #05050a;
  color: #00f7ff;
  border: 2px solid #00f7ff;
  box-shadow: 0 0 8px #00f7ff, 0 0 16px #00f7ff;
  transition: 0.2s ease;
}

button:hover {
  transform: scale(1.06);
}

button.delete {
  color: #ff004c;
  border-color: #ff004c;
  box-shadow: 0 0 8px #ff004c, 0 0 16px #ff004c;
}
</style>
</head>

<body>

<h1>My Quizzes</h1>

<ul id="quizzes-list"></ul>

<div>
  <button id="back-btn">Back to Create</button>
  <button id="use-btn">Use Quiz to Play Game</button>
  <button id="delete-btn" class="delete">Delete Quiz</button>
</div>

<script>
const STORAGE_KEY = "sandboxQuizzes";
const SELECTED_KEY = "sandboxSelectedQuiz";

let quizzes = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
let selectedIndex = null;

const list = document.getElementById("quizzes-list");

function render() {
  list.innerHTML = "";

  if (quizzes.length === 0) {
    const li = document.createElement("li");
    li.textContent = "No quizzes yet!";
    li.style.cursor = "default";
    list.appendChild(li);
    return;
  }

  quizzes.forEach((quiz, i) => {
    const li = document.createElement("li");
    li.textContent = `${quiz.name} (${quiz.questions.length} questions)`;
    if (i === selectedIndex) li.classList.add("selected");
    li.onclick = () => {
      selectedIndex = i;
      render();
    };
    list.appendChild(li);
  });
}

// Back to create page
document.getElementById("back-btn").onclick = () => {
  location.href = "sandbox.html";
};

// Use quiz and GO BACK automatically
document.getElementById("use-btn").onclick = () => {
  if (selectedIndex === null) {
    alert("Select a quiz first!");
    return;
  }

  sessionStorage.setItem(
    SELECTED_KEY,
    JSON.stringify(quizzes[selectedIndex])
  );

  alert("Quiz selected! Returning to create page...");
  location.href = "sandbox.html";
};

// Delete quiz
document.getElementById("delete-btn").onclick = () => {
  if (selectedIndex === null) {
    alert("Select a quiz to delete!");
    return;
  }

  if (confirm("Delete this quiz?")) {
    quizzes.splice(selectedIndex, 1);
    selectedIndex = null;
    localStorage.setItem(STORAGE_KEY, JSON.stringify(quizzes));
    render();
  }
};

render();
</script>

</body>
</html>
