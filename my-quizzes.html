<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Quizzes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
      text-align: center;
    }

    .section {
      margin-bottom: 30px;
    }

    .quiz {
      background: white;
      padding: 15px;
      margin: 10px auto;
      max-width: 420px;
      border-radius: 8px;
    }

    button {
      margin: 5px;
      padding: 8px 12px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>üìö My Quizzes</h1>

  <div class="section">
    <h2>Active Quizzes</h2>
    <div id="activeList"></div>
  </div>

  <div class="section">
    <h2>Archived Quizzes</h2>
    <div id="archivedList"></div>
  </div>

  <br>
  <button onclick="location.href='lobby.html'">‚¨Ö Back to Lobby</button>

  <script>
    let activeQuizzes = JSON.parse(localStorage.getItem("myQuizzes")) || [];
    let archivedQuizzes = JSON.parse(localStorage.getItem("archivedQuizzes")) || [];

    const activeList = document.getElementById("activeList");
    const archivedList = document.getElementById("archivedList");

    function render() {
      activeList.innerHTML = "";
      archivedList.innerHTML = "";

      if (activeQuizzes.length === 0) {
        activeList.innerHTML = "<p>No active quizzes.</p>";
      }

      if (archivedQuizzes.length === 0) {
        archivedList.innerHTML = "<p>No archived quizzes.</p>";
      }

      activeQuizzes.forEach((quiz, index) => {
        const div = document.createElement("div");
        div.className = "quiz";
        div.innerHTML = `
          <strong>${quiz.title}</strong><br><br>
          <button onclick="playQuiz(${index})">‚ñ∂ Play</button>
          <button onclick="archiveQuiz(${index})">üì¶ Archive</button>
          <button onclick="deleteActive(${index})">‚ùå Delete</button>
        `;
        activeList.appendChild(div);
      });

      archivedQuizzes.forEach((quiz, index) => {
        const div = document.createElement("div");
        div.className = "quiz";
        div.innerHTML = `
          <strong>${quiz.title}</strong><br><br>
          <button onclick="restoreQuiz(${index})">‚ôª Restore</button>
          <button onclick="deleteArchived(${index})">üóë Delete Forever</button>
        `;
        archivedList.appendChild(div);
      });
    }

    function playQuiz(index) {
      sessionStorage.setItem(
        "currentQuiz",
        JSON.stringify(activeQuizzes[index])
      );
      location.href = "game.html";
    }

    function archiveQuiz(index) {
      archivedQuizzes.push(activeQuizzes[index]);
      activeQuizzes.splice(index, 1);
      save();
    }

    function restoreQuiz(index) {
      activeQuizzes.push(archivedQuizzes[index]);
      archivedQuizzes.splice(index, 1);
      save();
    }

    function deleteActive(index) {
      if (!confirm("Delete this quiz?")) return;
      activeQuizzes.splice(index, 1);
      save();
    }

    function deleteArchived(index) {
      if (!confirm("Delete forever? This cannot be undone.")) return;
      archivedQuizzes.splice(index, 1);
      save();
    }

    function save() {
      localStorage.setItem("myQuizzes", JSON.stringify(activeQuizzes));
      localStorage.setItem("archivedQuizzes", JSON.stringify(archivedQuizzes));
      render();
    }

    render();
  </script>

</body>
</html>
