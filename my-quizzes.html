\<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Quizzes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  margin-top: 60px;
  background-color: #000;
  color: #fff;
}

h1 { font-size: 48px; margin-bottom: 50px; }
h2 { font-size: 36px; margin-top: 40px; }

ul { list-style: none; padding: 0; }

li {
  margin-bottom: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

button {
  font-size: 16px;
  margin: 2px;
  padding: 8px 16px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  color: #fff;
  background: linear-gradient(90deg, #1e90ff, #ff1493);
}

button.delete-btn { background: red; }
button.edit-btn { background: green; }

.back-btn {
  margin-top: 50px;
  font-size: 18px;
  padding: 12px 28px;
}
</style>
</head>

<body>

<h1>My Quizzes</h1>

<h2>Active Quizzes</h2>
<ul id="active-list"></ul>

<h2>Archived Quizzes</h2>
<ul id="archived-list"></ul>

<div>
  <button class="back-btn" onclick="window.location.href='create.html'">Create New Quiz</button>
</div>

<script>
function loadQuizzes(){
  const active = JSON.parse(localStorage.getItem("myQuizzes") || "{}");
  const archived = JSON.parse(localStorage.getItem("archivedQuizzes") || "{}");

  const activeList = document.getElementById("active-list");
  const archivedList = document.getElementById("archived-list");
  activeList.innerHTML = "";
  archivedList.innerHTML = "";

  // Active quizzes
  Object.keys(active).forEach(name => {
    const li = document.createElement("li");
    li.textContent = name + " ";

    const playBtn = document.createElement("button");
    playBtn.textContent = "Play â–¶";
    playBtn.onclick = () => {
      sessionStorage.setItem("currentQuiz", JSON.stringify(active[name]));
      window.location.href = "game.html";
    };

    const archiveBtn = document.createElement("button");
    archiveBtn.textContent = "Archive ðŸ“¦";
    archiveBtn.onclick = () => {
      const archivedData = JSON.parse(localStorage.getItem("archivedQuizzes") || "{}");
      archivedData[name] = active[name];
      localStorage.setItem("archivedQuizzes", JSON.stringify(archivedData));
      delete active[name];
      localStorage.setItem("myQuizzes", JSON.stringify(active));
      loadQuizzes();
    };

    const editBtn = document.createElement("button");
    editBtn.textContent = "Edit âœï¸";
    editBtn.className = "edit-btn";
    editBtn.onclick = () => {
      sessionStorage.setItem("editQuizName", name);
      sessionStorage.setItem("editQuizData", JSON.stringify(active[name]));
      window.location.href = "create.html";
    };

    const deleteBtn = document.createElement("button");
    deleteBtn.textContent = "Delete âŒ";
    deleteBtn.className = "delete-btn";
    deleteBtn.onclick = () => {
      if(confirm(`Delete "${name}" permanently?`)){
        delete active[name];
        localStorage.setItem("myQuizzes", JSON.stringify(active));
        loadQuizzes();
      }
    };

    li.appendChild(playBtn);
    li.appendChild(archiveBtn);
    li.appendChild(editBtn);
    li.appendChild(deleteBtn);
    activeList.appendChild(li);
  });

  // Archived quizzes
  Object.keys(archived).forEach(name => {
    const li = document.createElement("li");
    li.textContent = name + " ";

    const playBtn = document.createElement("button");
    playBtn.textContent = "Play â–¶";
    playBtn.onclick = () => {
      sessionStorage.setItem("currentQuiz", JSON.stringify(archived[name]));
      window.location.href = "game.html";
    };

    const unarchiveBtn = document.createElement("button");
    unarchiveBtn.textContent = "Unarchive â†©";
    unarchiveBtn.onclick = () => {
      const activeData = JSON.parse(localStorage.getItem("myQuizzes") || "{}");
      activeData[name] = archived[name];
      localStorage.setItem("myQuizzes", JSON.stringify(activeData));
      delete archived[name];
      localStorage.setItem("archivedQuizzes", JSON.stringify(archived));
      loadQuizzes();
    };

    const editBtn = document.createElement("button");
    editBtn.textContent = "Edit âœï¸";
    editBtn.className = "edit-btn";
    editBtn.onclick = () => {
      sessionStorage.setItem("editQuizName", name);
      sessionStorage.setItem("editQuizData", JSON.stringify(archived[name]));
      window.location.href = "create.html";
    };

    const deleteBtn = document.createElement("button");
    deleteBtn.textContent = "Delete âŒ";
    deleteBtn.className = "delete-btn";
    deleteBtn.onclick = () => {
      if(confirm(`Delete "${name}" permanently?`)){
        delete archived[name];
        localStorage.setItem("archivedQuizzes", JSON.stringify(archived));
        loadQuizzes();
      }
    };

    li.appendChild(playBtn);
    li.appendChild(unarchiveBtn);
    li.appendChild(editBtn);
    li.appendChild(deleteBtn);
    archivedList.appendChild(li);
  });
}

loadQuizzes();
</script>

</body>
</html>
