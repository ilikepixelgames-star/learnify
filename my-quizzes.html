<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Quizzes</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h2 { margin-top: 30px; }
    ul { list-style: none; padding: 0; }
    li { margin-bottom: 10px; }
    button { margin-left: 5px; padding: 2px 6px; cursor: pointer; }
    .delete { background-color: red; color: white; border: none; }
    .archive { background-color: orange; color: white; border: none; }
    .unarchive { background-color: green; color: white; border: none; }
    .play { background-color: blue; color: white; border: none; }
  </style>
</head>
<body>
  <h1>My Quizzes</h1>

  <h2>Active Quizzes</h2>
  <ul id="active-list"></ul>

  <h2>Archived Quizzes</h2>
  <ul id="archived-list"></ul>

  <script>
    // Load quizzes from localStorage
    const active = JSON.parse(localStorage.getItem("activeQuizzes")) || {};
    const archived = JSON.parse(localStorage.getItem("archivedQuizzes")) || {};

    const activeList = document.getElementById("active-list");
    const archivedList = document.getElementById("archived-list");

    function loadQuizzes() {
      activeList.innerHTML = "";
      archivedList.innerHTML = "";

      // Active quizzes
      Object.keys(active).forEach(name => {
        const li = document.createElement("li");
        li.textContent = name + " ";

        const play = document.createElement("button");
        play.textContent = "Play";
        play.className = "play";
        play.addEventListener("click", () => {
          sessionStorage.setItem("currentQuiz", JSON.stringify(active[name]));
          window.location.href = "game.html";
        });

        const archiveBtn = document.createElement("button");
        archiveBtn.textContent = "Archive";
        archiveBtn.className = "archive";
        archiveBtn.addEventListener("click", () => {
          archived[name] = active[name];
          delete active[name];
          localStorage.setItem("activeQuizzes", JSON.stringify(active));
          localStorage.setItem("archivedQuizzes", JSON.stringify(archived));
          loadQuizzes();
        });

        const del = document.createElement("button");
        del.textContent = "Delete";
        del.className = "delete";
        del.addEventListener("click", () => {
          if(confirm(`Delete "${name}" forever?`)) {
            delete active[name];
            localStorage.setItem("activeQuizzes", JSON.stringify(active));
            loadQuizzes();
          }
        });

        li.appendChild(play);
        li.appendChild(archiveBtn);
        li.appendChild(del);
        activeList.appendChild(li);
      });

      // Archived quizzes
      Object.keys(archived).forEach(name => {
        const li = document.createElement("li");
        li.textContent = name + " ";

        const play = document.createElement("button");
        play.textContent = "Play";
        play.className = "play";
        play.addEventListener("click", () => {
          sessionStorage.setItem("currentQuiz", JSON.stringify(archived[name]));
          window.location.href = "game.html";
        });

        const unarchiveBtn = document.createElement("button");
        unarchiveBtn.textContent = "Unarchive";
        unarchiveBtn.className = "unarchive";
        unarchiveBtn.addEventListener("click", () => {
          active[name] = archived[name];
          delete archived[name];
          localStorage.setItem("activeQuizzes", JSON.stringify(active));
          localStorage.setItem("archivedQuizzes", JSON.stringify(archived));
          loadQuizzes();
        });

        const del = document.createElement("button");
        del.textContent = "Delete";
        del.className = "delete";
        del.addEventListener("click", () => {
          if(confirm(`Delete "${name}" forever?`)) {
            delete archived[name];
            localStorage.setItem("archivedQuizzes", JSON.stringify(archived));
            loadQuizzes();
          }
        });

        li.appendChild(play);
        li.appendChild(unarchiveBtn);
        li.appendChild(del);
        archivedList.appendChild(li);
      });
    }

    loadQuizzes();
  </script>
</body>
</html>
