<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Quizzes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial; text-align: center; margin-top: 30px; }
button { padding: 6px 15px; margin: 3px; cursor: pointer; }
h2 { margin-top: 20px; }
ul { list-style:none; padding:0; display:inline-block; text-align:left; }
li { margin-bottom:5px; }
</style>
</head>
<body>
<h1>My Quizzes</h1>
<h2>Active Quizzes</h2>
<ul id="active-list"></ul>
<h2>Archived Quizzes</h2>
<ul id="archived-list"></ul>
<button onclick="window.location.href='create.html'">Back to Create</button>

<script>
function loadQuizzes(){
  const active=JSON.parse(localStorage.getItem("myQuizzes")||"{}");
  const archived=JSON.parse(localStorage.getItem("archivedQuizzes")||"{}");

  const activeList=document.getElementById("active-list");
  const archivedList=document.getElementById("archived-list");
  activeList.innerHTML=""; archivedList.innerHTML="";

  Object.keys(active).forEach(name=>{
    const li=document.createElement("li");
    li.textContent=name+" ";
    const play=document.createElement("button"); play.textContent="Play";
    play.addEventListener("click",()=>{ sessionStorage.setItem("currentQuiz",JSON.stringify(active[name])); window.location.href="game.html"; });
    const archive=document.createElement("button"); archive.textContent="Archive";
    archive.addEventListener("click",()=>{
      const archivedData=JSON.parse(localStorage.getItem("archivedQuizzes")||"{}");
      archivedData[name]=active[name];
      localStorage.setItem("archivedQuizzes",JSON.stringify(archivedData));
      delete active[name];
      localStorage.setItem("myQuizzes",JSON.stringify(active));
      loadQuizzes();
    });
    li.appendChild(play); li.appendChild(archive); activeList.appendChild(li);
  });

  Object.keys(archived).forEach(name=>{
    const li=document.createElement("li");
    li.textContent=name+" ";
    const play=document.createElement("button"); play.textContent="Play";
    play.addEventListener("click",()=>{ sessionStorage.setItem("currentQuiz",JSON.stringify(archived[name])); window.location.href="game.html"; });
    li.appendChild(play); archivedList.appendChild(li);
  });
}

loadQuizzes();
</script>
</body>
</html>
