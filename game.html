<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Quiz Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: Arial; text-align: center; margin-top: 40px; background:#f4f6fb; }
  button { padding: 12px 24px; margin: 8px; font-size: 18px; cursor: pointer; border-radius: 10px; border:none; background:#4f46e5; color:white; }
  button:disabled{background:#999;}
  #answers button{display:block;margin:10px auto;width:60%;}
  #leaderboard{background:white;padding:20px;border-radius:15px;width:60%;margin:20px auto;box-shadow:0 5px 15px rgba(0,0,0,0.15);}
  #next-btn{display:none;}
</style>
</head>
<body>

<h1 id="q-title"></h1>
<p id="q-text"></p>
<div id="answers"></div>
<div id="leaderboard" style="display:none;">
  <h2>üèÜ Score</h2>
  <p>Your Score: <span id="your-score"></span></p>
</div>
<button id="next-btn">Next Question</button>
<button id="back-btn">‚¨ÖÔ∏è Back</button>

<script>
let questions=JSON.parse(sessionStorage.getItem("currentQuiz")||"[]");

if(questions.length===0){
  alert("No questions found! Go back to Create.");
  window.location.href="create.html";
}

const title=document.getElementById("q-title");
const qText=document.getElementById("q-text");
const ansDiv=document.getElementById("answers");
const nextBtn=document.getElementById("next-btn");
const leaderboard=document.getElementById("leaderboard");
const yourScoreEl=document.getElementById("your-score");
const backBtn=document.getElementById("back-btn");

let index=0;
let score=0;

function loadQuestion(){
  const q=questions[index];
  title.textContent="Question "+(index+1);
  qText.textContent=q.q;
  ansDiv.innerHTML="";
  nextBtn.style.display="none";
  leaderboard.style.display="none";

  q.answers.forEach((a,i)=>{
    const b=document.createElement("button");
    b.textContent=a;
    b.onclick=()=>answer(i);
    ansDiv.appendChild(b);
  });
}

function answer(choice){
  ansDiv.querySelectorAll("button").forEach(b=>b.disabled=true);
  if(choice===questions[index].correct) score+=1000;
  yourScoreEl.textContent=score;
  leaderboard.style.display="block";
  nextBtn.style.display="inline-block";
}

nextBtn.onclick=()=>{
  index++;
  if(index<questions.length) loadQuestion();
  else{
    title.textContent="üéâ Quiz Complete!";
    qText.textContent="Final Score: "+score;
    ansDiv.innerHTML="";
    nextBtn.style.display="none";
  }
};

backBtn.onclick=()=>window.location.href="create.html";

loadQuestion();
</script>

</body>
</html>
