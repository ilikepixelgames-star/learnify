<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Create Quiz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  text-align: center;
  padding: 30px;
}

h1 {
  margin-bottom: 25px;
}

input {
  width: 260px;
  padding: 10px;
  font-size: 16px;
  margin-bottom: 20px;
}

button {
  width: 260px;
  padding: 10px;
  font-size: 16px;
  cursor: pointer;
}

/* Group spacing */
.button-group {
  margin-bottom: 20px;
}

#questions {
  margin-top: 20px;
}

.question {
  background: white;
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 12px;
  margin: 8px auto;
  max-width: 520px;
  text-align: left;
}
</style>
</head>

<body>

<h1>Create Your Own Quiz</h1>

<input type="text" id="quizTitle" placeholder="Quiz Title">

<div id="questions"></div>

<!-- Buttons grouped for old "spread out" layout -->
<div class="button-group">
  <button onclick="addQuestion()">Add Question</button>
</div>

<div class="button-group">
  <button onclick="saveQuiz()">Save Quiz</button>
  <button onclick="playCurrentQuiz()">Play Current Quiz</button>
</div>

<div class="button-group">
  <button onclick="archiveCurrentQuiz()">Archive Current Quiz</button>
  <button onclick="deleteCurrentQuiz()">Delete Current Quiz</button>
</div>

<div class="button-group">
  <button onclick="window.location.href='my-quizzes.html'">My Quizzes</button>
</div>

<script>
let questions = [];

function addQuestion() {
  const question = prompt("Enter question:");
  if (!question) return;

  const correct = prompt("Correct answer:");
  if (!correct) return;

  let wrong = [];
  for (let i = 1; i <= 3; i++) {
    const w = prompt("Wrong answer " + i + ":");
    if (!w) return;
    wrong.push(w);
  }

  const choices = [...wrong, correct].sort(() => Math.random() - 0.5);

  questions.push({ question, correct, choices });
  renderQuestions();
}

function renderQuestions() {
  const div = document.getElementById("questions");
  div.innerHTML = "";

  questions.forEach((q, i) => {
    const el = document.createElement("div");
    el.className = "question";
    el.innerHTML = "<b>" + (i + 1) + ".</b> " + q.question;
    div.appendChild(el);
  });
}

function saveQuiz() {
  const title = quizTitle.value.trim();
  if (!title || questions.length === 0) {
    alert("Add a title and questions first.");
    return;
  }

  const quizzes = JSON.parse(localStorage.getItem("myQuizzes") || "[]");
  quizzes.push({ title, questions });
  localStorage.setItem("myQuizzes", JSON.stringify(quizzes));

  alert("Quiz saved!");
  location.href = "my-quizzes.html";
}

function playCurrentQuiz() {
  const title = quizTitle.value.trim();
  if (!title || questions.length === 0) {
    alert("Nothing to play.");
    return;
  }

  sessionStorage.setItem(
    "currentQuiz",
    JSON.stringify({ title, questions })
  );

  location.href = "game.html";
}

function archiveCurrentQuiz() {
  const title = quizTitle.value.trim();
  if (!title || questions.length === 0) {
    alert("Nothing to archive.");
    return;
  }

  const archived = JSON.parse(localStorage.getItem("archivedQuizzes") || "[]");
  archived.push({ title, questions });
  localStorage.setItem("archivedQuizzes", JSON.stringify(archived));

  clearQuiz();
  alert("Quiz archived.");
}

function deleteCurrentQuiz() {
  if (!confirm("Delete current quiz?")) return;
  clearQuiz();
}

function clearQuiz() {
  questions = [];
  quizTitle.value = "";
  document.getElementById("questions").innerHTML = "";
}
</script>

</body>
</html>
