<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Create Quiz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  text-align: center;
  padding: 30px;
}

h1 {
  margin-bottom: 20px;
}

input {
  width: 300px;
  padding: 10px;
  font-size: 16px;
  margin-bottom: 20px;
}

/* PREVIEW BOX */
#previewBox {
  background: #fff;
  border: 2px solid #aaa;
  border-radius: 10px;
  padding: 20px;
  max-width: 650px;
  margin: 0 auto 30px auto;
  text-align: left;
}

.preview-title {
  font-weight: bold;
  font-size: 18px;
  margin-bottom: 15px;
}

.preview-question {
  padding: 10px;
  margin-bottom: 10px;
  border-bottom: 1px solid #ddd;
}

.preview-question:last-child {
  border-bottom: none;
}

/* BUTTON GROUPS */
.button-group {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 20px;
}

.button-group button {
  width: 140px;
  padding: 10px;
  font-size: 16px;
  cursor: pointer;
}
</style>
</head>

<body>

<h1>Create Your Own Quiz</h1>

<input type="text" id="quizTitle" placeholder="Quiz Title">

<!-- PREVIEW BOX -->
<div id="previewBox">
  <div class="preview-title" id="previewTitle">Quiz Title Here</div>
  <div id="previewQuestions"></div>
</div>

<!-- BUTTON GROUPS -->
<div class="button-group">
  <button onclick="addQuestion()">Add Question</button>
</div>

<div class="button-group">
  <button onclick="saveQuiz()">Save Quiz</button>
  <button onclick="playCurrentQuiz()">Play Current Quiz</button>
</div>

<div class="button-group">
  <button onclick="archiveCurrentQuiz()">Archive Quiz</button>
  <button onclick="deleteCurrentQuiz()">Delete Quiz</button>
</div>

<div class="button-group">
  <button onclick="window.location.href='my-quizzes.html'">My Quizzes</button>
</div>

<script>
let questions = [];

/* ADD QUESTION */
function addQuestion() {
  const question = prompt("Enter question:");
  if (!question) return;

  const correct = prompt("Correct answer:");
  if (!correct) return;

  let wrong = [];
  for (let i = 1; i <= 3; i++) {
    const w = prompt("Wrong answer " + i + ":");
    if (!w) return;
    wrong.push(w);
  }

  const choices = [...wrong, correct].sort(() => Math.random() - 0.5);

  questions.push({ question, correct, choices });
  renderPreview();
}

/* RENDER PREVIEW BOX */
function renderPreview() {
  const title = document.getElementById("quizTitle").value.trim();
  document.getElementById("previewTitle").textContent = title || "Quiz Title Here";

  const container = document.getElementById("previewQuestions");
  container.innerHTML = "";

  questions.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "preview-question";

    div.innerHTML = "<b>" + (i + 1) + ".</b> " + q.question +
      "<br>Correct: " + q.correct +
      "<br>Choices: " + q.choices.join(", ");
    container.appendChild(div);
  });
}

/* SAVE QUIZ */
function saveQuiz() {
  const title = document.getElementById("quizTitle").value.trim();
  if (!title || questions.length === 0) {
    alert("Add a title and questions first.");
    return;
  }

  const quizzes = JSON.parse(localStorage.getItem("myQuizzes") || "[]");
  quizzes.push({ title, questions });
  localStorage.setItem("myQuizzes", JSON.stringify(quizzes));

  alert("Quiz saved!");
  location.href = "my-quizzes.html";
}

/* PLAY CURRENT QUIZ */
function playCurrentQuiz() {
  const title = document.getElementById("quizTitle").value.trim();
  if (!title || questions.length === 0) {
    alert("Nothing to play.");
    return;
  }

  sessionStorage.setItem("currentQuiz", JSON.stringify({ title, questions }));
  location.href = "game.html";
}

/* ARCHIVE CURRENT QUIZ */
function archiveCurrentQuiz() {
  const title = document.getElementById("quizTitle").value.trim();
  if (!title || questions.length === 0) {
    alert("Nothing to archive.");
    return;
  }

  const archived = JSON.parse(localStorage.getItem("archivedQuizzes") || "[]");
  archived.push({ title, questions });
  localStorage.setItem("archivedQuizzes", JSON.stringify(archived));

  clearQuiz();
  alert("Quiz archived.");
}

/* DELETE CURRENT QUIZ */
function deleteCurrentQuiz() {
  if (!confirm("Delete current quiz?")) return;
  clearQuiz();
}

/* CLEAR QUIZ */
function clearQuiz() {
  questions = [];
  document.getElementById("quizTitle").value = "";
  document.getElementById("previewTitle").textContent = "Quiz Title Here";
  document.getElementById("previewQuestions").innerHTML = "";
}
</script>

</body>
</html>
