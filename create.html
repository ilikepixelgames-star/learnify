<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Create Your Own Quiz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin-top: 30px;
  }

  .box {
    border: 2px solid #ccc;
    padding: 15px;
    margin: 15px auto;
    width: 80%;
    max-width: 600px;
  }

  input {
    width: 95%;
    padding: 8px;
    margin: 6px 0;
    font-size: 16px;
  }

  .answers label {
    display: block;
    margin: 5px 0;
    cursor: pointer;
  }

  button {
    padding: 10px 20px;
    margin: 8px;
    font-size: 16px;
    cursor: pointer;
  }

  ul {
    list-style: none;
    padding: 0;
  }

  li {
    margin-bottom: 6px;
  }
</style>
</head>

<body>

<h1>Create Your Own Quiz</h1>

<div class="box">
  <h3>Quiz Title</h3>
  <input id="quiz-title" placeholder="Enter quiz title">
</div>

<div class="box">
  <h3>Question</h3>
  <input id="question" placeholder="Enter question">
</div>

<div class="box answers">
  <h3>Answers (select correct one)</h3>
  <label><input type="radio" name="correct" value="0"> <input id="a0" placeholder="Answer 1"></label>
  <label><input type="radio" name="correct" value="1"> <input id="a1" placeholder="Answer 2"></label>
  <label><input type="radio" name="correct" value="2"> <input id="a2" placeholder="Answer 3"></label>
  <label><input type="radio" name="correct" value="3"> <input id="a3" placeholder="Answer 4"></label>
</div>

<button onclick="addQuestion()">Add Question</button>

<div class="box">
  <h3>Questions</h3>
  <ul id="question-list"></ul>
</div>

<button onclick="saveQuiz()">Save Quiz</button>
<button onclick="playQuiz()">Play Current Quiz</button>
<button onclick="archiveQuiz()">Archive Current Quiz</button>
<button onclick="deleteQuiz()">Delete Current Quiz</button>
<button onclick="goLobby()">Back to Lobby</button>

<script>
  let questions = [];

  function addQuestion() {
    const q = document.getElementById("question").value.trim();
    const answers = [
      document.getElementById("a0").value.trim(),
      document.getElementById("a1").value.trim(),
      document.getElementById("a2").value.trim(),
      document.getElementById("a3").value.trim()
    ];
    const correct = document.querySelector('input[name="correct"]:checked');

    if (!q || answers.some(a => !a) || !correct) {
      alert("Fill everything and select the correct answer.");
      return;
    }

    questions.push({
      q: q,
      answers: answers,
      correct: Number(correct.value)
    });

    updateList();
    clearInputs();
  }

  function updateList() {
    const list = document.getElementById("question-list");
    list.innerHTML = "";
    questions.forEach((q, i) => {
      const li = document.createElement("li");
      li.textContent = `${i + 1}. ${q.q}`;
      list.appendChild(li);
    });
  }

  function clearInputs() {
    document.getElementById("question").value = "";
    document.getElementById("a0").value = "";
    document.getElementById("a1").value = "";
    document.getElementById("a2").value = "";
    document.getElementById("a3").value = "";
    document.querySelectorAll('input[name="correct"]').forEach(r => r.checked = false);
  }

  function saveQuiz() {
    const title = document.getElementById("quiz-title").value.trim();
    if (!title || questions.length === 0) {
      alert("Add a title and at least one question.");
      return;
    }

    const quizzes = JSON.parse(localStorage.getItem("myQuizzes") || "{}");
    quizzes[title] = questions;
    localStorage.setItem("myQuizzes", JSON.stringify(quizzes));

    sessionStorage.setItem("currentQuiz", JSON.stringify(questions));
    alert("Quiz saved!");
  }

  function playQuiz() {
    if (questions.length === 0) {
      alert("No questions yet.");
      return;
    }
    sessionStorage.setItem("currentQuiz", JSON.stringify(questions));
    window.location.href = "game.html";
  }

  function archiveQuiz() {
    const title = document.getElementById("quiz-title").value.trim();
    if (!title) return;

    const quizzes = JSON.parse(localStorage.getItem("myQuizzes") || "{}");
    const archived = JSON.parse(localStorage.getItem("archivedQuizzes") || "{}");

    if (!quizzes[title]) {
      alert("Save quiz before archiving.");
      return;
    }

    archived[title] = quizzes[title];
    delete quizzes[title];

    localStorage.setItem("archivedQuizzes", JSON.stringify(archived));
    localStorage.setItem("myQuizzes", JSON.stringify(quizzes));

    alert("Quiz archived.");
  }

  function deleteQuiz() {
    if (!confirm("Delete current quiz?")) return;

    questions = [];
    document.getElementById("quiz-title").value = "";
    updateList();
    alert("Quiz deleted.");
  }

  function goLobby() {
    window.location.href = "lobby.html";
  }
</script>

</body>
</html>
