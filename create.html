<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Create Your Own Questions</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin-top: 30px;
    background-color: #000;
    color: #fff;
  }

  input {
    padding: 8px;
    margin: 5px;
    font-size: 16px;
    border-radius: 5px;
    border: 1px solid #444;
  }

  button {
    font-size: 16px;
    padding: 12px 20px;
    margin: 5px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    color: #fff;
    font-weight: bold;
    background: linear-gradient(90deg, #1e90ff, #ff1493);
    box-shadow: 0 0 10px #1e90ff, 0 0 20px #ff1493, 0 0 30px #ff4500;
    transition: 0.3s ease-in-out;
    position: relative;
    overflow: hidden;
  }

  button:hover {
    box-shadow: 0 0 20px #1e90ff, 0 0 30px #ff1493, 0 0 40px #ff4500;
    transform: scale(1.05);
  }

  button::after {
    content: '';
    position: absolute;
    top: 0; left: -75%;
    width: 50%; height: 100%;
    background: rgba(255,255,255,0.2);
    transform: skewX(-25deg);
    transition: all 0.5s;
  }

  button:hover::after {
    left: 125%;
  }

  /* Fancy red Delete button */
  .delete-btn {
    background: red;
    box-shadow: 0 0 22px rgba(255,0,0,1), 0 0 46px rgba(255,50,50,0.9);
  }

  #questions-list {
    margin-top: 20px;
    text-align: left;
    display: inline-block;
  }

  li {
    margin-bottom: 5px;
    color: #fff;
  }

  h1, h2 {
    color: #fff;
  }
</style>
</head>
<body>

<h1>Create Your Own Questions</h1>

<input type="text" id="quiz-name" placeholder="Quiz Name"><br>
<input type="text" id="question" placeholder="Question"><br>
<input type="text" id="answer1" placeholder="Answer 1">
<input type="text" id="answer2" placeholder="Answer 2">
<input type="text" id="answer3" placeholder="Answer 3">
<input type="text" id="answer4" placeholder="Answer 4"><br>
<input type="number" id="correct" placeholder="Correct answer (1-4)" min="1" max="4"><br>

<button id="add-btn">Add Question</button>
<button id="save-btn">Save Quiz</button>
<button id="play-btn">Play Current Quiz</button>
<button id="my-quizzes-btn">My Quizzes</button>
<button id="archive-btn">Archive Current Quiz</button>
<button id="delete-btn" class="delete-btn">Delete Current Quiz</button>
<button id="lobby-btn">Back to Lobby</button>
<!-- NEW BUTTON: Play Game directly from lobby if quiz exists -->
<button id="direct-play-btn">ðŸŽ® Play Game</button>

<h2>Questions Added:</h2>
<ul id="questions-list"></ul>

<script>
let questions = JSON.parse(sessionStorage.getItem("currentQuiz") || "[]");

const quizNameInput = document.getElementById("quiz-name");
const qInput = document.getElementById("question");
const a1Input = document.getElementById("answer1");
const a2Input = document.getElementById("answer2");
const a3Input = document.getElementById("answer3");
const a4Input = document.getElementById("answer4");
const correctInput = document.getElementById("correct");

const addBtn = document.getElementById("add-btn");
const saveBtn = document.getElementById("save-btn");
const playBtn = document.getElementById("play-btn");
const archiveBtn = document.getElementById("archive-btn");
const deleteBtn = document.getElementById("delete-btn");
const lobbyBtn = document.getElementById("lobby-btn");
const myQuizzesBtn = document.getElementById("my-quizzes-btn");
const directPlayBtn = document.getElementById("direct-play-btn");

const list = document.getElementById("questions-list");

function updateList() {
  list.innerHTML = "";
  questions.forEach((q,i) => {
    const li = document.createElement("li");
    li.textContent = `${i+1}. ${q.q} (Correct: ${q.answers[q.correct]})`;
    list.appendChild(li);
  });
}

addBtn.addEventListener("click", () => {
  const q = qInput.value.trim();
  const a1 = a1Input.value.trim();
  const a2 = a2Input.value.trim();
  const a3 = a3Input.value.trim();
  const a4 = a4Input.value.trim();
  const correct = parseInt(correctInput.value) - 1;

  if(!q || !a1 || !a2 || !a3 || !a4 || isNaN(correct) || correct<0 || correct>3){
    alert("Please fill all fields correctly!");
    return;
  }

  questions.push({q, answers:[a1,a2,a3,a4], correct});
  sessionStorage.setItem("currentQuiz", JSON.stringify(questions));
  updateList();

  qInput.value = a1Input.value = a2Input.value = a3Input.value = a4Input.value = correctInput.value = "";
});

saveBtn.addEventListener("click", () => {
  const name = quizNameInput.value.trim() || "Untitled Quiz";
  if(questions.length===0){ alert("Add at least one question!"); return; }

  const saved = JSON.parse(localStorage.getItem("myQuizzes") || "{}");
  saved[name] = questions;
  localStorage.setItem("myQuizzes", JSON.stringify(saved));

  sessionStorage.removeItem("currentQuiz");
  questions=[];
  updateList();
  quizNameInput.value="";
  alert(`Quiz "${name}" saved!`);
});

archiveBtn.addEventListener("click", () => {
  const name = quizNameInput.value.trim() || "Untitled Quiz";
  if(questions.length===0){ alert("Add at least one question!"); return; }

  const archived = JSON.parse(localStorage.getItem("archivedQuizzes") || "{}");
  archived[name] = questions;
  localStorage.setItem("archivedQuizzes", JSON.stringify(archived));

  const saved = JSON.parse(localStorage.getItem("myQuizzes") || "{}");
  if(saved[name]) delete saved[name];
  localStorage.setItem("myQuizzes", JSON.stringify(saved));

  questions=[];
  sessionStorage.removeItem("currentQuiz");
  updateList();
  quizNameInput.value="";
  alert(`Quiz "${name}" archived!`);
});

deleteBtn.addEventListener("click", () => {
  const name = quizNameInput.value.trim();
  if(!name){ alert("Enter the quiz name to delete!"); return; }
  if(confirm(`Delete quiz "${name}" permanently?`)){
    const saved = JSON.parse(localStorage.getItem("myQuizzes") || "{}");
    if(saved[name]) delete saved[name];
    localStorage.setItem("myQuizzes", JSON.stringify(saved));
    questions=[];
    sessionStorage.removeItem("currentQuiz");
    updateList();
    quizNameInput.value="";
    alert(`Quiz "${name}" deleted!`);
  }
});

lobbyBtn.addEventListener("click", () => { window.location.href = "lobby.html"; });
playBtn.addEventListener("click", () => {
  if(questions.length===0){ alert("Add at least one question!"); return; }
  window.location.href="game.html";
});
myQuizzesBtn.addEventListener("click", () => { window.location.href="my-quizzes.html"; });

// NEW: Direct Play Game button
directPlayBtn.addEventListener("click", () => {
  const storedQuiz = JSON.parse(sessionStorage.getItem("currentQuiz") || "[]");
  if(storedQuiz.length === 0){
    alert("No quiz found to play! Create or load a quiz first.");
    return;
  }
  window.location.href = "game.html";
});

updateList();
</script>

</body>
</html>
