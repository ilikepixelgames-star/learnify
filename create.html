<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Learnify Quiz System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial; text-align: center; padding: 20px; background: #f7f7f7; }
    input, button { margin: 5px; padding: 8px; font-size: 16px; }
    .quiz, .question { background: #fff; border: 1px solid #ccc; border-radius: 8px; padding: 15px; margin: 10px auto; max-width: 400px; }
    #feedback { font-weight: bold; margin-top: 15px; }
    #next-btn { display:none; }
  </style>
</head>
<body>

<h1>Learnify Quiz System</h1>

<div id="menu">
  <button onclick="showCreate()">‚úèÔ∏è Create New Quiz</button>
  <button onclick="showMyQuizzes()">üìö My Quizzes</button>
</div>

<div id="create" style="display:none;">
  <h2>Create Your Quiz</h2>
  <input type="text" id="quizTitle" placeholder="Quiz Title"><br>
  <div id="questions"></div>
  <button onclick="addQuestion()">‚ûï Add Question</button><br>
  <button onclick="saveQuiz()">üíæ Save Quiz</button>
  <button onclick="backToMenu()">‚¨Ö Back</button>
</div>

<div id="my-quizzes" style="display:none;">
  <h2>My Quizzes</h2>
  <div id="quiz-list"></div>
  <button onclick="backToMenu()">‚¨Ö Back to Menu</button>
</div>

<div id="game" style="display:none;">
  <h2 id="quiz-title"></h2>
  <div id="question-container"></div>
  <p id="feedback"></p>
  <button id="next-btn">Next Question</button>
  <button onclick="backToMenu()">‚¨Ö Back to My Quizzes</button>
</div>

<script>
let questions = [];
let quizzes = JSON.parse(localStorage.getItem("myQuizzes") || "[]");
let currentQuiz = null;
let currentQuestion = 0;

// --- Menu functions ---
function backToMenu() {
  document.getElementById("menu").style.display = "block";
  document.getElementById("create").style.display = "none";
  document.getElementById("my-quizzes").style.display = "none";
  document.getElementById("game").style.display = "none";
}

function showCreate() {
  document.getElementById("menu").style.display = "none";
  document.getElementById("create").style.display = "block";
  questions = [];
  document.getElementById("quizTitle").value = "";
  document.getElementById("questions").innerHTML = "";
}

function showMyQuizzes() {
  document.getElementById("menu").style.display = "none";
  document.getElementById("my-quizzes").style.display = "block";
  renderQuizzes();
}

// --- Create Quiz functions ---
function addQuestion() {
  const q = prompt("Enter your question:");
  if (!q) return;
  const correct = prompt("Enter correct answer:");
  if (!correct) return;
  const choices = [];
  for (let i=0;i<3;i++) {
    const choice = prompt(`Enter wrong choice ${i+1}:`);
    if (!choice) return;
    choices.push(choice);
  }
  questions.push({
    question: q,
    correct: correct,
    choices: [...choices, correct].sort(() => Math.random() - 0.5)
  });
  renderQuestions();
}

function renderQuestions() {
  const container = document.getElementById("questions");
  container.innerHTML = "";
  questions.forEach((q,i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.textContent = `${i+1}. ${q.question}`;
    container.appendChild(div);
  });
}

function saveQuiz() {
  const title = document.getElementById("quizTitle").value.trim();
  if (!title || questions.length===0) {
    alert("Quiz must have a title and at least one question.");
    return;
  }
  quizzes.push({title, questions});
  localStorage.setItem("myQuizzes", JSON.stringify(quizzes));
  alert("Quiz saved!");
  showMyQuizzes();
}

// --- My Quizzes functions ---
function renderQuizzes() {
  const quizList = document.getElementById("quiz-list");
  quizList.innerHTML = "";
  if (quizzes.length===0) {
    quizList.innerHTML = "<p>No quizzes found. Create one!</p>";
    return;
  }
  quizzes.forEach((quiz,index)=>{
    const div = document.createElement("div");
    div.className="quiz";
    div.innerHTML = `
      <strong>${quiz.title}</strong><br><br>
      <button onclick="playQuiz(${index})">‚ñ∂ Play</button>
      <button onclick="deleteQuiz(${index})">‚ùå Delete</button>
    `;
    quizList.appendChild(div);
  });
}

function playQuiz(index) {
  currentQuiz = quizzes[index];
  currentQuestion = 0;
  document.getElementById("my-quizzes").style.display="none";
  document.getElementById("game").style.display="block";
  showQuestion();
}

function deleteQuiz(index) {
  if (!confirm("Delete this quiz?")) return;
  quizzes.splice(index,1);
  localStorage.setItem("myQuizzes", JSON.stringify(quizzes));
  renderQuizzes();
}

// --- Game functions ---
function showQuestion() {
  const container = document.getElementById("question-container");
  const feedback = document.getElementById("feedback");
  const nextBtn = document.getElementById("next-btn");
  feedback.textContent = "";
  nextBtn.style.display="none";

  if (currentQuestion >= currentQuiz.questions.length) {
    container.innerHTML = "<p>‚úÖ Quiz Complete!</p>";
    return;
  }

  const q = currentQuiz.questions[currentQuestion];
  let html = `<p><strong>${q.question}</strong></p>`;
  q.choices.forEach(c=>{
    html += `<button onclick="checkAnswer('${c}')">${c}</button> `;
  });
  container.innerHTML = html;
}

function checkAnswer(answer) {
  const q = currentQuiz.questions[currentQuestion];
  const feedback = document.getElementById("feedback");
  const nextBtn = document.getElementById("next-btn");
  if (answer===q.correct) {
    feedback.textContent = "‚úÖ Correct!";
  } else {
    feedback.textContent = `‚ùå Wrong! Correct: ${q.correct}`;
  }
  nextBtn.style.display="inline-block";
}

document.getElementById("next-btn").addEventListener("click", ()=>{
  currentQuestion++;
  showQuestion();
});

// --- Start on menu ---
backToMenu();

</script>
</body>
</html>
